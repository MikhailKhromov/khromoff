<VirtualHost *:80>
    # Virtual host for the redirection

    ServerName khrmff.ru
    ServerAdmin email@email.com
    DocumentRoot /dev/null/

    Redirect permanent / https://khrmff.ru/
</VirtualHost>

<VirtualHost *:80>
    # Virtual host for the redirection

    ServerName l.khrmff.ru
    ServerAdmin email@email.com
    DocumentRoot /dev/null/

    Redirect permanent / https://khrmff.ru/shorturl/
</VirtualHost>



<VirtualHost *:443>
	ServerName khrmff.ru
	ServerAdmin webmaster@example.com
	DocumentRoot /home/ubuntu/khromoff/
	ErrorLog ${APACHE_LOG_DIR}/error.log
	CustomLog ${APACHE_LOG_DIR}/access.log combined
	
	Alias /static /home/ubuntu/khromoff/static
	Alias /.well-known/acme-challenge/YpapW6-3TiNWDPFB2pRDZp3qBFwpm5NEhlEOKj-Iaos /home/ubuntu/khromoff/.well-known/acme-challenge/YpapW6-3TiNWDPFB2pRDZp3qBFwpm5NEhlEOKj-Iaos
	
	<Directory /home/ubuntu/khromoff/.well-known>
		Require all granted
	</Directory>

	<Directory /home/ubuntu/khromoff/static>
		Require all granted
	</Directory>
	
	<Directory /home/ubuntu/khromoff/khromoff>
		<Files wsgi.py>
			Require all granted
		</Files>
	</Directory>
	
	WSGIDaemonProcess khromoff python-path=/home/ubuntu/khromoff/ python-home=/home/ubuntu/venv
	WSGIProcessGroup khromoff
	WSGIScriptAlias / /home/ubuntu/khromoff/khromoff/wsgi.py


	SSLEngine on
	SSLCertificateFile /etc/apache2/certs/khrmff.ru.crt
	SSLCertificateKeyFile /etc/apache2/certs/private.key
</VirtualHost>

<VirtualHost *:443>
	ServerName l.khrmff.ru
        DocumentRoot /dev/null
        ErrorLog ${APACHE_LOG_DIR}/error.log
        CustomLog ${APACHE_LOG_DIR}/access.log combined


	Redirect / https://khrmff.ru/shorturl/


	SSLEngine on
	SSLCertificateFile /etc/apache2/certs/l.khrmff.ru.crt
	SSLCertificateKeyFile /etc/apache2/certs/private.l.khrmff.ru.key


</VirtualHost>
